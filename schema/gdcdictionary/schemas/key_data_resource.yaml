$schema: "http://json-schema.org/draft-04/schema#"
# key_data_resource
id: "key_data_resource"
title: KeyDataResource
type: object
nodeTerms: null
namespace: http://chordshealth.org/
category: administrative
program: '*'
project: '*'
description: A key dataset for climate and health
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: resources
    backref: key_data_resources
    label: is_a_resource_of
    target_type: resource
    multiplicity: one_to_one
    required: true

required:
  - submitter_id
  - type
  - resources

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:
  #system properties, do not change or remove, this is initial 1.5 testing for key dataset load
  created_datetime:
    $ref: "_definitions.yaml#/datetime"   
  id:
    $ref: "_definitions.yaml#/UUID"
  project_id:
    $ref: "_definitions.yaml#/project_id"
  state:
    $ref: "_definitions.yaml#/state"
  submitter_id:
    description: A human-readable identifier for the study's record in the database. It can be used in place of the UUID for identifying or recalling a record.
    type: string
  type:
    description: The name of the node in the database to be used in queries.
    enum:
      - key_data_resource
  updated_datetime:
    $ref: "_definitions.yaml#/datetime"

  # data resc props are common
  display_type:
    description: Display type of resource
    type: string
  comments: # FIXME: we're temporarily putting suggested use here, this should be at the resc level - MC
    description: Notes on usage of the data, including warnings.
    type: string
  intended_use:
    description: Suggested, intended, or applied uses for dataset in environmental health research. This is drawn from the example applications and review of documentation from the data providers on the intended uses.
    type: string
  source_name:
    description: Name of the primary data source if not generated by this resource (# - preferred data).
    type: array
    items:
      type: string
  update_frequency:
    description: Frequency of data resource update (# - preferred data).
    type: array
    items:
      type: string
  update_frequency_other:
    description: If "Other" is selected in previous field, enter the frequency here.
    type: string
  includes_citizen_collected:
    description: Flag indicating whether or not resource includes citizen science.
    type: boolean
  has_api:
    description: Flag indicating whether or not resource has an api.
    type: boolean
  has_visualization_tool:
    description: Flag indicating whether or not resource has visualization tool(s).
    type: boolean

  # additional properties to describe the dataset
  time_extent_start_yyyy:
    description: The earliest year of data collection.
    $ref: "_definitions.yaml#/year"
  time_extent_end_yyyy:
    description: The last year of data collection; if ongoing and frequently updated, enter "Current" and if not frequently updated, include latest year available and update regularly.
    $ref: "_definitions.yaml#/year"
  time_available_comment:
    description: Description of the time extent details if multiple times exist in the resource or if there are discontinuities over time.
    type: string
  temporal_resolution:
    description: The finest available temporal resolution (i.e., highest frequency, finest scale) from CV (# - preferred data).
    type: array
    items:
      type: string
  temporal_resolution_other:
    description: If "Other" is selected in the previous field, enter the the temporal resolution here, e.g., one year daily average.
    type: array
    items:
      type: string
  temporal_resolution_all_available:
    description: All available temporal resolutions (i.e., scale or frequency) of the dataset, such as daily or annual, selected from a CV.
    type: array
    items:
      type: string
  temporal_resolution_all_other_available:
    description: If "Other" is selected in the previous field, enter all other temporal resolutions for the dataset.
    type: array
    items:
      type: string
  temporal_resolution_comment:
    description: Description of the time extent details if multiple times exist in the resource or if there are discontinuities over time.
    type: string
  spatial_resolution:
    description: The finest spatial resolution of the data. If there are multiple resources and determining the finest spatial resolution is impractical, use "Other".
    type: array
    items:
      type: string
  spatial_resolution_other:
    description: If "Other" is selected in the previous field, enter the finest spatial resolution of the dataset. It may be a specific distance measure (e.g., '5 km’, ‘2 degrees’, ‘2 degrees by 5 degrees’). Convert resolutions like 40 deg. 11.25 min. to 40 degrees, 11 arc min, 25 arc sec.
    type: array
    items:
      type: string
  spatial_resolution_all_available:
    description: All available horizontal spatial resolutions of the dataset, such as 1-km grid or ZIP codes, from CV. Use "Other" for spatial resolutions not included in the CV.
    type: array
    items:
      type: string
  spatial_resolution_all_other_available:
    description: If "Other" is selected in the previous field, enter all other spatial resolutions not in CV, such as value and unit of measure, e.g., 50 km, 1 degree, 0.75 sq. km.
    type: array
    items:
      type: string
  spatial_resolution_comment:
    description: Any other relevant details describing the spatial resolution of the dataset, such as variable spatial resolution (e.g., nested grids), or grids with less common geometry (hexagonal grid, 0.5 degree x 0.625 degree, etc.).
    type: string
  spatial_coverage:
    description: Maximum spatial coverage of the data; if specific regions, list in next field below
    type: array
    items:
      type: string
  spatial_bounding_box:
    description: Boundary coordinates for the geographical region (should be included in the model spatial metadata).
    type: array
    items:
      type: string
  geometry_type:
    description: Type of geometric data, the file extension will be different for different types (# - preferred data).
    type: array
    items:
      type: string
  geometry_source:
    description: Source or provider of the geometry data.
    type: array
    items:
      type: string
  geometry_source_other:
    description: If "Other" is selected in the previous field, enter the geometry source here.
    type: array
    items:
      type: string
  exposure_media:
    description: The media to which the phenomena is related.
    type: array
    items:
      type: string
  geographic_feature:
    description: The type of geographic feature associated with the data.
    type: array
    items:
      type: string
  geographic_feature_other:
    description: If "Other" is selected in the previous field, enter the type of geographic feature associated with the data.
    type: array
    items:
      type: string
  model_methods:
    description: If data are modeled, description of modeling approaches used to generate them.
    type: array
    items:
      type: string
  model_methods_other:
    description: If "Other" is selected in the previous field, enter the data modelling method(s) here.
    type: array
    items:
      type: string
  # measures is a three-level hierarchy of parent/subcategory/measure to allow easier filtering and grouping
  measures_parent_category:
    description: type of environmental phenomena being observed at the parent concept level
    type: array   
    items:
      type: string
  measures_subcategory_major:
    description: type of environmental phenomena being observed at the subcategory level
    type: array
    items:
      type: string
  measures_subcategory_minor:
    description: type of environmental phenomena being observed at the subcategory level
    type: array
    items:
      type: string
  measures:
    description: List of specific variables collected by the system. If the variables are part of a set of variables then the set name can be provided, e.g., clinical labs for clinical laboratory tests especially if the specific labs vary from individual to individual, or VOC for a list of volatile organic chemicals. Copy measure terms from 'measure_list file'.
    type: array
    items:
      type: string
  measures_other:
    description: If term is not in 'measures_list file' e.g., not part of VOC, enter it here for discussion with others about incorporation into VOC.
    type: array
    items:
      type: string
  measurement_method:
    description: Method used to capture the data measurements.
    type: array
    items:
      type: string
  measurement_method_other:
    description: If "Other" is selected in the previous field, enter the method used to capture the data measurements.
    type: array
    items:
      type: string

# prop no longer used
#  metrics_derived_from_data_set:
#    description: Example individual level exposure metrics derived from dataset
#    type: string

  data_formats:
    description: Format of data download files (# - preferred data)
    type: array
    items:
      type: string
  data_location_text:
    description: Location(s) where data files are downloaded, e.g., ftp site, Amazon S3 bucket (# - preferred data).
    type: array
    items:
      type: string
  data_link:
    description: URL to online location where data can be downloaded.
    type: array
    items:
      type: string
  license_type:
    description: License needed for using the dataset.
    type: array
    items:
      type: string
  license_type_other:
    description: If "Other" is selected in the previous field, enter the type of license needed to use the dataset.
    type: array
    items:
      type: string
  use_suggested:
    description: Suggested, intended, or applied use(s) in environmental and public health research based on example use applications and the data-provider's documentation on intended uses. (# = preferred).
    type: array
    items:
      type: string
  use_suggested_other:
    description: If "Other" is selected in the previous field, enter the suggested use(s) here.
    type: array
    items:
      type: string
  use_strengths:
    description: Key strengths of the dataset for the suggested use(s).
    type: array
    items:
      type: string
  use_limitations:
    description: Key limitations or restrictions for the suggested use(s).
    type: array
    items:
      type: string
  use_example_application_link:
    description: The URL corresponding to each example application to document specific data use (if available) and/or the homepage.
    type: array
    items:
      type: string
  use_example_application_text:
    description: Examples of applications (e.g., health cohorts) that have used the dataset and are the basis for the example uses, metrics, and key variables. (# - preferred data).
    type: array
    items:
      type: string
  use_example_metrics:
    description: Example metrics derived from example applications, that can be calculated using the dataset to assess individuals' (e.g., patients, health cohort participants) environmental exposures based on geocoded addresses and time period of exposure.
    type: array
    items:
      type: string
# prop no longer used
#  dataset_publications:
#    description: list of publications describing the specific key dataset, distinct from resource-wide publications
#    type: array
#    items:
#      type: string
#  dataset_publication_links:
#    description: link for each publication (provisional, mike is testing using the publication node as a more proper approach), distinct from resource-wide publications
#    type: array
#    items:
#      type: string
  resources:
    description: The resource this dataset belongs to, i.e., a link to the parent node.
    $ref: "_definitions.yaml#/to_many"
